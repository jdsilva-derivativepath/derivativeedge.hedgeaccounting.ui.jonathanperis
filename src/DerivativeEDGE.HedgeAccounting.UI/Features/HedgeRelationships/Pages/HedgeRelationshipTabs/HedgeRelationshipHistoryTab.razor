@using System.Linq;
@using DerivativeEdge.HedgeAccounting.Api.Client

<div class="w-full max-h-[35vh] overflow-y-auto">
    @if (HistoryBatches?.Any() == true)
    {
        @foreach (var batch in HistoryBatches)
        {
            <div class="bg-gray-50 border-b-2 border-gray-300 p-2.5 mb-3.5 flex flex-col max-w-[28.125rem]">
                <h3 class="font-regular mb-2 p-0">Periodic Regression.</h3>
                <div class="flex items-center justify-start gap-2">
                    @{
                        var displayDate = GetDisplayDate(batch);
                    }
                    <span class="text-sm text-gray-800 font-medium min-w-[200px] flex-shrink-0">@displayDate</span>
                    <span class="text-gray-600 font-bold mx-2 flex-shrink-0">|</span>
                    <span class="text-sm text-gray-500 font-regular flex-grow">@(batch.RunBy?.Person?.FullName ?? "Unknown User")</span>
                </div>
            </div>
        }
    }
    else
    {
        <div class="flex flex-col items-center justify-center p-8 text-gray-500">
            <div class="text-center">
                <h3>📋 No History Data Available</h3>
            </div>
        </div>
    }
</div>

@code {

}