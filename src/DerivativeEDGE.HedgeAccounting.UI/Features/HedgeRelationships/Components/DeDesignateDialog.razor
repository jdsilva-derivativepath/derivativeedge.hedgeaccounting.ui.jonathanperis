<SfDialog Width="33rem" 
          Height="auto" 
          CssClass="dp-dialog" 
          IsModal="true" 
          AllowDragging="true" 
          EnableResize="false"
          @bind-Visible="Visible">
    <DialogTemplates>
        <Header>De-Designation Workflow</Header>
        <Content>
            @if (!string.IsNullOrEmpty(UserMessage))
            {
                <div style="margin-bottom: 1rem;">
                    <SfMessage Severity="@(IsError ? MessageSeverity.Error : MessageSeverity.Warning)">
                        @UserMessage
                    </SfMessage>
                </div>
            }
            
            <div class="form-group dp-inputs">
                <span class="input-label">Dedesignation Reason</span>
                <div class="custom-radio-container">
                    <SfRadioButton CssClass="input-radiobutton" 
                                   TChecked="int" 
                                   Name="reason" 
                                   Value="0" 
                                   Label="Termination" 
                                   @bind-Checked="DedesignationReason"
                                   ValueChange="@(() => HandleReasonChange(0))" />
                    <SfRadioButton CssClass="input-radiobutton" 
                                   TChecked="int" 
                                   Name="reason" 
                                   Value="1" 
                                   Label="Ineffectiveness" 
                                   @bind-Checked="DedesignationReason"
                                   ValueChange="@(() => HandleReasonChange(1))" />
                </div>
            </div>

            <div class="form-group dp-inputs">
                <span class="input-label">Dedesignation Date</span>
                <SfDatePicker TValue="DateTime?"
                              CssClass="calendar-datepicker" 
                              Enabled="true" 
                              Format="MM/dd/yyyy" 
                              Placeholder="mm/dd/yyyy" 
                              ShowClearButton="true"
                              @bind-Value="DedesignationDate">
                </SfDatePicker>
            </div>

            <div class="form-group dp-inputs">
                <span class="input-label">Cash Payment Type</span>
                <div class="custom-radio-container">
                    <SfRadioButton CssClass="input-radiobutton" 
                                   TChecked="int" 
                                   Name="cashPayment" 
                                   Value="0" 
                                   Label="Full Cash Payment" 
                                   @bind-Checked="CashPaymentType"
                                   ValueChange="@(() => HandleCashPaymentTypeChange(0))" />
                    <SfRadioButton CssClass="input-radiobutton" 
                                   TChecked="int" 
                                   Name="cashPayment" 
                                   Value="1" 
                                   Label="Partial Cash Payment" 
                                   @bind-Checked="CashPaymentType"
                                   ValueChange="@(() => HandleCashPaymentTypeChange(1))" />
                    <SfRadioButton CssClass="input-radiobutton" 
                                   TChecked="int" 
                                   Name="cashPayment" 
                                   Value="2" 
                                   Label="No Cash Payment" 
                                   @bind-Checked="CashPaymentType"
                                   ValueChange="@(() => HandleCashPaymentTypeChange(2))" />
                </div>
            </div>

            <div class="form-group dp-inputs">
                <span class="input-label">Payment Amount</span>
                <SfNumericTextBox TValue="decimal?"
                                  CssClass="input-numeric" 
                                  Placeholder="0.00" 
                                  Enabled="@PaymentFieldsEnabled"
                                  Format="C2"
                                  @bind-Value="Payment" />
            </div>

            <div class="custom-datepicker-container">
                <div class="dp-inputs">
                    <label class="input-label">Start Date</label>
                    <SfDatePicker TValue="DateTime?"
                                  CssClass="calendar-datepicker" 
                                  Enabled="@DateFieldsEnabled" 
                                  Format="MM/dd/yyyy" 
                                  Placeholder="mm/dd/yyyy" 
                                  ShowClearButton="true"
                                  @bind-Value="TimeValuesStartDate">
                    </SfDatePicker>
                </div>
                <div class="dp-inputs">
                    <label class="input-label">End Date</label>
                    <SfDatePicker TValue="DateTime?"
                                  CssClass="calendar-datepicker" 
                                  Enabled="@DateFieldsEnabled"
                                  Format="MM/dd/yyyy" 
                                  Placeholder="mm/dd/yyyy" 
                                  ShowClearButton="true"
                                  @bind-Value="TimeValuesEndDate">
                    </SfDatePicker>
                </div>
            </div>

            <div class="form-group dp-inputs">
                <span class="input-label">Accrual</span>
                <SfTextBox CssClass="input-textbox"
                           Value="@Accrual?.ToString("C2")"
                           Enabled="false" />
            </div>

            @if (ShowBasisAdjustmentBalance)
            {
                <div class="form-group dp-inputs">
                    <span class="input-label">Basis Adjustment</span>
                    <SfNumericTextBox TValue="decimal?"
                                      CssClass="input-numeric" 
                                      Placeholder="0.00" 
                                      Enabled="false"
                                      Format="C2"
                                      @bind-Value="BasisAdjustment" />
                </div>
                <div class="form-group dp-inputs">
                    <span class="input-label">Basis Adjustment Balance</span>
                    <SfNumericTextBox TValue="decimal?"
                                      CssClass="input-numeric" 
                                      Placeholder="0.00" 
                                      Enabled="false"
                                      Format="C2"
                                      @bind-Value="BasisAdjustmentBalance" />
                </div>
            }

            <div class="form-group dp-inputs">
                <span class="input-label">Hedged Exposure</span>
                <div class="custom-radio-container">
                    <SfRadioButton CssClass="input-radiobutton" 
                                   TChecked="bool" 
                                   Name="exposure" 
                                   Value="true" 
                                   Label="Exists" 
                                   @bind-Checked="HedgedExposureExist"
                                   ValueChange="@(() => HandleHedgedExposureChange(true))" />
                    <SfRadioButton CssClass="input-radiobutton" 
                                   TChecked="bool" 
                                   Name="exposure" 
                                   Value="false" 
                                   Label="Does Not Exist" 
                                   @bind-Checked="HedgedExposureExist"
                                   ValueChange="@(() => HandleHedgedExposureChange(false))" />
                </div>
            </div>

            <div class="custom-action-container">
                <div class="dp-buttons">
                    <SfButton CssClass="button-secondary button-default" Content="Cancel" Type="button" OnClick="@HandleClose" IsPrimary="false" />
                    <SfButton CssClass="button-primary button-default" Content="De-Designate" IsPrimary="true" Disabled="@IsDeDesignateDisabled" OnClick="@HandleDeDesignate" />
                </div>
            </div>
        </Content>
    </DialogTemplates>
    <DialogPositionData X="center" Y="center" />
</SfDialog>

